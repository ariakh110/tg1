# راهنمای UI/UX برای پلتفرم بازارگاه آهن‌آلات و خدمات صنعتی

این سند استانداردهای طراحی تجربه کاربری و رابط کاربری (Next.js) را برای جریان‌های اصلی بازارگاه مشخص می‌کند.

---

## 1) اصول پایه UX

1. **شفافیت مرحله‌ای**: کاربر باید همیشه بداند «الان در چه مرحله‌ای هستم؟ قدم بعدی چیست؟»
2. **اعتمادسازی**: نشان دادن وضعیت‌های پرداخت، escrow، تاییدها، مدارک، امتیازها.
3. **B2B-first**: کاربران حرفه‌ای‌اند؛ نیاز به جزئیات، اسناد، شرایط پرداخت و زمان‌بندی دارند.
4. **کمترین اصطکاک**: فرم‌ها کوتاه، پیش‌فرض‌ها مناسب، ذخیره پیش‌نویس (draft).
5. **Role-aware UI**: داشبوردها و اکشن‌ها بر اساس نقش تغییر کنند.

---

## 2) معماری Frontend (Next.js) - پیشنهاد

- `app/` (App Router)
- `features/` (ماژول‌محور: orders, offers, payments, profile)
- `components/` (UI components)
- `services/api/` (client API)
- `hooks/` (data fetching + auth)
- `lib/` (utils)
- `styles/`

> پیشنهاد: استفاده از `react-query` یا `SWR` برای caching/fetching و مدیریت وضعیت.

---

## 3) Onboarding و احراز هویت (KYC)

### 3.1) ورود/ثبت‌نام

- ورود با شماره موبایل + OTP یا email/password (بسته به بازار هدف)
- برای نقش‌های حرفه‌ای (Seller/Cutter/Driver/QC) بعد از ثبت‌نام:
  - فرم تکمیل پروفایل
  - ارسال مدارک
  - نمایش وضعیت KYC: در انتظار بررسی / تایید / رد (با دلیل)

### 3.2) UX نکته‌ها

- در صفحه پروفایل، نقش‌ها قابل مشاهده و تغییر context باشند.
- اگر کاربر نقش Seller را انتخاب کند ولی KYC تایید نشده:
  - UI اجازه ارسال پیشنهاد ندهد
  - CTA واضح: «تکمیل احراز هویت»

---

## 4) داشبوردها (Role-based Dashboards)

### 4.1) Buyer Dashboard

- لیست سفارش‌ها با فیلتر (type/status/date)
- فید اعلام بارها/فروش‌های فعال (SELL) با فیلتر و CTA: «ارسال پیشنهاد خرید»
- هر سفارش:
  - کارت خلاصه: نوع کالا/خدمت، شهر، وضعیت، تعداد پیشنهادها
  - CTA متناسب با مرحله:
    - «مشاهده پیشنهادها»
    - «پرداخت بیعانه»
    - «پرداخت قسط»
    - «تایید تحویل»

### 4.2) Seller Dashboard

- فید RFQها (BUY orders) با فیلتر:
  - نوع کالا، شهر مقصد، شهر مبدا (در صورت موجود)
- مدیریت اعلام فروش (SELL):
  - ثبت/ویرایش اعلام بار
  - مشاهده پیشنهادهای خریداران و انتخاب
- سفارش‌های فعال:
  - درخواست‌های انتخاب‌شده توسط خریدار
  - CTA:
    - «تایید موجودی»
    - «آماده بارگیری»

### 4.3) Cutter Dashboard

- فید درخواست‌های CUT
- درخواست‌های فعال
- آپلود نتیجه/تصاویر/فایل خروجی

### 4.4) Driver Dashboard

- فید درخواست‌های SHIP
- قابلیت «قبول فوری» (اگر مدل اوبر فعال باشد) یا «ارسال قیمت»
- نمایش مسیر (مبدا/مقصد) و اطلاعات بار (وزن/نوع)

### 4.5) QC Dashboard

- فید درخواست‌های QC
- ثبت گزارش ساختاریافته + فایل پیوست
- وضعیت: report submitted

### 4.6) Admin Dashboard

- صف KYC
- مانیتور سفارش‌ها و پرداخت‌ها
- ابزارهای مداخله: cancel/refund/force-complete (با لاگ)

---

## 5) طراحی جریان‌ها (Flows)

### 5.1) ایجاد سفارش BUY (RFQ)

فرم مرحله‌ای (Step-by-step) پیشنهاد می‌شود:

1) نوع کالا (Product Type)
2) مشخصات فنی (گرید/ابعاد/استاندارد)
3) مقدار/وزن تقریبی
4) مقصد و بازه زمانی
5) خدمات مرتبط (اختیاری): CUT / SHIP / QC
6) خلاصه و تایید

**نکات UX**
- امکان ذخیره پیش‌نویس
- نشان دادن نمونه‌های استاندارد (placeholder)
- نمایش «چه کسانی این RFQ را می‌بینند؟» برای اعتماد

### 5.2) ایجاد سفارش SELL (اعلام بار)

فرم مرحله‌ای پیشنهاد می‌شود:

1) نوع کالا
2) مشخصات فنی (گرید/ابعاد/استاندارد)
3) مقدار/وزن
4) محل بارگیری/مبدا
5) قیمت یا شرایط فروش (ثابت یا قابل مذاکره)
6) خلاصه و انتشار

**نکات UX**
- تاکید روی نمایش عمومی برای خریداران
- امکان درج مدارک/تصویر کالا (در صورت نیاز)

### 5.3) مشاهده و مقایسه پیشنهادها

- جدول/کارت مقایسه:
  - قیمت کل/قیمت واحد
  - درصد بیعانه
  - زمان آماده‌سازی
  - امتیاز فروشنده
  - انبار مبدا
- CTA:
  - «انتخاب این پیشنهاد»
  - «سوال از فروشنده» (پیام)
- **حریم رقابتی**: فروشنده نباید پیشنهادهای دیگر را ببیند.

### 5.4) پرداخت‌ها

- صفحه پرداخت باید:
  - مبلغ + دلیل پرداخت (بیعانه/قسط/تسویه)
  - مهلت پرداخت (deadline) و هشدارها
  - وضعیت escrow: «در حساب امن نگهداری می‌شود تا تکمیل مرحله»
- بعد از پرداخت:
  - رسید/کد پیگیری
  - نمایش وضعیت سفارش جدید

### 5.5) حمل و برش و QC (خدمات)

UX مشابه:
- ایجاد درخواست
- دریافت پیشنهادها
- انتخاب مجری
- پرداخت
- پیگیری وضعیت
- تایید تکمیل

---

## 6) نمایش وضعیت‌ها (Status UI)

- هر سفارش یک **Stepper** داشته باشد (مرحله‌های واضح)
- statusهای فنی را به متن ساده تبدیل کنید:
  - `DEPOSIT_PENDING` → «در انتظار پرداخت بیعانه»
  - `PROVIDER_CONFIRMED` → «فروشنده موجودی را تایید کرد»
  - `LOADED_AWAITING_WEIGHT` → «بارگیری انجام شد؛ در انتظار وزن نهایی»
- در UI همیشه «قدم بعدی» را با CTA نشان دهید.

---

## 7) اعلان‌ها و پیام‌ها

### 7.1) اعلان‌های حیاتی

- پیشنهاد جدید
- پیشنهاد انتخاب شد
- پرداخت موفق/ناموفق
- نزدیک شدن به deadline پرداخت
- تغییر وضعیت سفارش
- گزارش QC آماده شد

### 7.2) Inbox

- صفحه اعلان‌ها با امکان mark as read
- لینک مستقیم به سفارش/پیشنهاد مرتبط

### 7.3) پیام‌رسانی (اختیاری)

- گفت‌وگو در سطح Order
- پیام‌ها timestamp و sender مشخص داشته باشند
- قوانین: عدم تبادل شماره مستقیم (سیاست محصول)

---

## 8) دسترس‌پذیری و ریسپانسیو

- رعایت WCAG پایه:
  - کنتراست مناسب
  - focus states
  - aria-label
- در موبایل:
  - داشبورد ساده‌تر
  - CTAهای بزرگ و واضح
- اعداد و واحدها:
  - نمایش واحد (تن/کیلوگرم/متر)
  - نمایش قیمت با جداکننده هزار

---

## 9) طراحی برای اعتماد (Trust)

- پروفایل‌های تاییدشده (badge)
- نمایش مدارک (حداقل وضعیت تایید)
- نمایش امتیاز و تعداد معاملات موفق
- نمایش سیاست escrow و شرایط لغو به صورت قابل فهم
